(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72173],{98301:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reference/rockets/nestjs-auth-refresh/README",function(){return n(63830)}])},63830:function(e,s,n){"use strict";n.r(s),n.d(s,{__toc:function(){return t}});var r=n(85893),i=n(92673),o=n(82643);let t=[{depth:2,value:"Project",id:"project"},{depth:2,value:"Table of Contents",id:"table-of-contents"},{depth:2,value:"Tutorials",id:"tutorials"},{depth:3,value:"1. Getting Started with AuthRefreshModule",id:"1-getting-started-with-authrefreshmodule"},{depth:4,value:"1.1 Introduction",id:"11-introduction"},{depth:5,value:"Overview of the Library",id:"overview-of-the-library"},{depth:5,value:"Purpose and Key Features",id:"purpose-and-key-features"},{depth:4,value:"1.2 Installation",id:"12-installation"},{depth:5,value:"Install the AuthRefreshModule package",id:"install-the-authrefreshmodule-package"},{depth:5,value:"Add the AuthRefreshModule to Your NestJS Application",id:"add-the-authrefreshmodule-to-your-nestjs-application"},{depth:4,value:"1.3 Basic Setup in a NestJS Project",id:"13-basic-setup-in-a-nestjs-project"},{depth:5,value:"Scenario: Refreshing JWT Tokens",id:"scenario-refreshing-jwt-tokens"},{depth:6,value:"Adding AuthRefreshModule to your NestJS Application",id:"adding-authrefreshmodule-to-your-nestjs-application"},{depth:4,value:"1.4 First Token Refresh",id:"14-first-token-refresh"},{depth:5,value:"Validating the Setup",id:"validating-the-setup"},{depth:5,value:"Step 1: Obtain a Refresh Token",id:"step-1-obtain-a-refresh-token"},{depth:5,value:"Step 2: Refresh the JWT Token",id:"step-2-refresh-the-jwt-token"},{depth:5,value:"Example CURL Calls",id:"example-curl-calls"},{depth:6,value:"Obtain a Refresh Token",id:"obtain-a-refresh-token"},{depth:6,value:"Example Refresh Token Response",id:"example-refresh-token-response"},{depth:6,value:"Refresh the JWT Token",id:"refresh-the-jwt-token"},{depth:6,value:"Response (example)",id:"response-example"},{depth:2,value:"How-To Guides",id:"how-to-guides"},{depth:3,value:"1. Registering AuthRefreshModule Synchronously",id:"1-registering-authrefreshmodule-synchronously"},{depth:3,value:"2. Registering AuthRefreshModule Asynchronously",id:"2-registering-authrefreshmodule-asynchronously"},{depth:3,value:"3. Global Registering AuthRefreshModule Asynchronously",id:"3-global-registering-authrefreshmodule-asynchronously"},{depth:3,value:"4. Using Custom User Lookup Service",id:"4-using-custom-user-lookup-service"},{depth:3,value:"5. Implementing and Using Custom Token Verification Service",id:"5-implementing-and-using-custom-token-verification-service"},{depth:3,value:"6. Overwriting the Settings",id:"6-overwriting-the-settings"},{depth:3,value:"7. Integration with Other NestJS Modules",id:"7-integration-with-other-nestjs-modules"},{depth:2,value:"Engineering Concepts",id:"engineering-concepts"},{depth:3,value:"Conceptual Overview of JWT Refresh Tokens",id:"conceptual-overview-of-jwt-refresh-tokens"},{depth:4,value:"What is a Refresh Token?",id:"what-is-a-refresh-token"},{depth:4,value:"Benefits of Using Refresh Tokens",id:"benefits-of-using-refresh-tokens"},{depth:3,value:"Design Choices in AuthRefreshModule",id:"design-choices-in-authrefreshmodule"},{depth:4,value:"Why Use NestJS Guards?",id:"why-use-nestjs-guards"},{depth:4,value:"Synchronous vs Asynchronous Registration",id:"synchronous-vs-asynchronous-registration"},{depth:4,value:"Global vs Feature-Specific Registration",id:"global-vs-feature-specific-registration"},{depth:3,value:"Integrating AuthRefreshModule with Other Modules",id:"integrating-authrefreshmodule-with-other-modules"},{depth:4,value:"How AuthRefreshModule Works with AuthJwtModule",id:"how-authrefreshmodule-works-with-authjwtmodule"},{depth:4,value:"Integrating with AuthLocalModule",id:"integrating-with-authlocalmodule"}];function l(e){let s=Object.assign({p:"p",strong:"strong",a:"a",hr:"hr",h1:"h1",h2:"h2",img:"img",ul:"ul",li:"li",h3:"h3",h4:"h4",h5:"h5",code:"code",pre:"pre",span:"span",h6:"h6",blockquote:"blockquote"},(0,o.a)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"@concepta/nestjs-auth-refresh"})," â€¢ ",(0,r.jsx)(s.a,{href:"globals",children:(0,r.jsx)(s.strong,{children:"Docs"})})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"../packages",children:"Rockets"})," / @concepta/nestjs-auth-refresh"]}),"\n",(0,r.jsx)(s.h1,{children:"Rockets NestJS Refresh Authentication"}),"\n",(0,r.jsx)(s.p,{children:"Authenticate requests using JWT refresh tokens passed via\nthe request (headers, cookies, body, query, etc)."}),"\n",(0,r.jsx)(s.h2,{id:"project",children:"Project"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"https://www.npmjs.com/package/@concepta/nestjs-auth-refresh",children:(0,r.jsx)(s.img,{src:"https://img.shields.io/npm/v/@concepta/nestjs-auth-refresh",alt:"NPM Latest"})}),"\n",(0,r.jsx)(s.a,{href:"https://www.npmjs.com/package/@concepta/nestjs-auth-refresh",children:(0,r.jsx)(s.img,{src:"https://img.shields.io/npm/dw/@conceptadev/nestjs-auth-refresh",alt:"NPM Downloads"})}),"\n",(0,r.jsx)(s.a,{href:"https://github.com/conceptadev/rockets",children:(0,r.jsx)(s.img,{src:"https://img.shields.io/github/last-commit/conceptadev/rockets?logo=github",alt:"GH Last Commit"})}),"\n",(0,r.jsx)(s.a,{href:"https://github.com/conceptadev/rockets/graphs/contributors",children:(0,r.jsx)(s.img,{src:"https://img.shields.io/github/contributors/conceptadev/rockets?logo=github",alt:"GH Contrib"})}),"\n",(0,r.jsx)(s.a,{href:"https://www.npmjs.com/package/@nestjs/common",children:(0,r.jsx)(s.img,{src:"https://img.shields.io/github/package-json/dependency-version/conceptadev/rockets/@nestjs/common?label=NestJS&logo=nestjs&filename=packages%2Fnestjs-core%2Fpackage.json",alt:"NestJS Dep"})})]}),"\n",(0,r.jsx)(s.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#tutorials",children:"Tutorials"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#1-getting-started-with-authrefreshmodule",children:"1. Getting Started with AuthRefreshModule"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#11-introduction",children:"1.1 Introduction"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#overview-of-the-library",children:"Overview of the Library"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#purpose-and-key-features",children:"Purpose and Key Features"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#12-installation",children:"1.2 Installation"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#install-the-authrefreshmodule-package",children:"Install the AuthRefreshModule package"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#add-the-authrefreshmodule-to-your-nestjs-application",children:"Add the AuthRefreshModule to Your NestJS Application"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#13-basic-setup-in-a-nestjs-project",children:"1.3 Basic Setup in a NestJS Project"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#scenario-refreshing-jwt-tokens",children:"Scenario: Refreshing JWT Tokens"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#adding-authrefreshmodule-to-your-nestjs-application",children:"Adding AuthRefreshModule to your NestJS Application"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#14-first-token-refresh",children:"1.4 First Token Refresh"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#validating-the-setup",children:"Validating the Setup"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#step-1-obtain-a-refresh-token",children:"Step 1: Obtain a Refresh Token"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#step-2-refresh-the-jwt-token",children:"Step 2: Refresh the JWT Token"})}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#example-curl-calls",children:"Example CURL Calls"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#obtain-a-refresh-token",children:"Obtain a Refresh Token"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#example-refresh-token-response",children:"Example Refresh Token Response"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#refresh-the-jwt-token",children:"Refresh the JWT Token"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#how-to-guides",children:"How-To Guides"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#1-registering-authrefreshmodule-synchronously",children:"1. Registering AuthRefreshModule Synchronously"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#2-registering-authrefreshmodule-asynchronously",children:"2. Registering AuthRefreshModule Asynchronously"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#3-global-registering-authrefreshmodule-asynchronously",children:"3. Global Registering AuthRefreshModule Asynchronously"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#4-using-custom-user-lookup-service",children:"4. Using Custom User Lookup Service"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#5-implementing-and-using-custom-token-verification-service",children:"5. Implementing and Using Custom Token Verification Service"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#6-overwriting-the-settings",children:"6. Overwriting the Settings"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#7-integration-with-other-nestjs-modules",children:"7. Integration with Other NestJS Modules"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#engineering-concepts",children:"Engineering Concepts"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#conceptual-overview-of-jwt-refresh-tokens",children:"Conceptual Overview of JWT Refresh Tokens"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#what-is-a-refresh-token",children:"What is a Refresh Token?"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#benefits-of-using-refresh-tokens",children:"Benefits of Using Refresh Tokens"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#design-choices-in-authrefreshmodule",children:"Design Choices in AuthRefreshModule"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#why-use-nestjs-guards",children:"Why Use NestJS Guards?"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#synchronous-vs-asynchronous-registration",children:"Synchronous vs Asynchronous Registration"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#global-vs-feature-specific-registration",children:"Global vs Feature-Specific Registration"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.a,{href:"#integrating-authrefreshmodule-with-other-modules",children:"Integrating AuthRefreshModule with Other Modules"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#how-authrefreshmodule-works-with-authjwtmodule",children:"How AuthRefreshModule Works with AuthJwtModule"})}),"\n",(0,r.jsx)(s.li,{children:(0,r.jsx)(s.a,{href:"#integrating-with-authlocalmodule",children:"Integrating with AuthLocalModule"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"tutorials",children:"Tutorials"}),"\n",(0,r.jsx)(s.h3,{id:"1-getting-started-with-authrefreshmodule",children:"1. Getting Started with AuthRefreshModule"}),"\n",(0,r.jsx)(s.h4,{id:"11-introduction",children:"1.1 Introduction"}),"\n",(0,r.jsx)(s.h5,{id:"overview-of-the-library",children:"Overview of the Library"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," is a powerful yet easy-to-use NestJS\nmodule designed for implementing JWT refresh token functionality.\nWith a few simple steps, you can integrate secure token refreshing\ninto your application without hassle."]}),"\n",(0,r.jsx)(s.h5,{id:"purpose-and-key-features",children:"Purpose and Key Features"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Ease of Use"}),": The primary goal of ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," is to\nsimplify the process of adding JWT refresh token functionality to your\nNestJS application. All you need to do is provide configuration data, and\nthe module handles the rest."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Synchronous and Asynchronous Registration"}),": Flexibly register the module\neither synchronously or asynchronously, depending on your application's needs."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Global and Feature-Specific Registration"}),": Register the module globally or\nfor specific features within your application, allowing for more granular\ncontrol over authentication and authorization requirements."]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"12-installation",children:"1.2 Installation"}),"\n",(0,r.jsx)(s.h5,{id:"install-the-authrefreshmodule-package",children:"Install the AuthRefreshModule package"}),"\n",(0,r.jsxs)(s.p,{children:["To install the ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," package, run the following command in\nyour terminal:"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,r.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"npm"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"install"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"@concepta/nestjs-auth-refresh"})]})})}),"\n",(0,r.jsx)(s.h5,{id:"add-the-authrefreshmodule-to-your-nestjs-application",children:"Add the AuthRefreshModule to Your NestJS Application"}),"\n",(0,r.jsxs)(s.p,{children:["To add the ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," to your NestJS application, import the module in\nyour main application module (usually ",(0,r.jsx)(s.code,{children:"app.module.ts"}),") and register it using the\n",(0,r.jsx)(s.code,{children:"forRoot"})," or ",(0,r.jsx)(s.code,{children:"forRootAsync"})," method:"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"typescript","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"typescript","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { AuthRefreshModule } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@concepta/nestjs-auth-refresh'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"@"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Module"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  imports"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"AuthRefreshModule"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".forRoot"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// Configuration options"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    })"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"})"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"AppModule"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {}"})]})]})}),"\n",(0,r.jsx)(s.h4,{id:"13-basic-setup-in-a-nestjs-project",children:"1.3 Basic Setup in a NestJS Project"}),"\n",(0,r.jsx)(s.h5,{id:"scenario-refreshing-jwt-tokens",children:"Scenario: Refreshing JWT Tokens"}),"\n",(0,r.jsxs)(s.p,{children:["To demonstrate the basic setup of the ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"}),", let's consider\na scenario where we want to refresh JWT tokens. In this example, we will use\n",(0,r.jsx)(s.code,{children:"@concepta/nestjs-auth-refresh"})," in conjunction with other essential modules\nsuch as ",(0,r.jsx)(s.code,{children:"@concepta/nestjs-auth-jwt"}),", ",(0,r.jsx)(s.code,{children:"@concepta/nestjs-auth-local"}),", and\n",(0,r.jsx)(s.code,{children:"@concepta/nestjs-authentication"}),". These modules work together to provide a\ncomprehensive and secure token refresh mechanism."]}),"\n",(0,r.jsxs)(s.p,{children:["For more detailed instructions on setting up the authentication modules,\nplease refer to the ",(0,r.jsx)(s.a,{href:"https://github.com/conceptadev/rockets/tree/main/packages/nestjs-authentication",children:"Authentication Module Documentation"}),".\nWe will continue with the tutorial in the ",(0,r.jsx)(s.a,{href:"https://github.com/conceptadev/rockets/tree/main/packages/nestjs-authentication",children:"Authentication Module Documentation"}),"."]}),"\n",(0,r.jsx)(s.h6,{id:"adding-authrefreshmodule-to-your-nestjs-application",children:"Adding AuthRefreshModule to your NestJS Application"}),"\n",(0,r.jsxs)(s.p,{children:["To add the ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," to your NestJS application, import the module\nin your main application module (usually ",(0,r.jsx)(s.code,{children:"app.module.ts"}),") and register it\nusing the ",(0,r.jsx)(s.code,{children:"forRoot"})," or ",(0,r.jsx)(s.code,{children:"forRootAsync"})," method, let's use the\n",(0,r.jsx)(s.code,{children:"MyJwtUserLookupService"})," created at\n",(0,r.jsx)(s.a,{href:"https://github.com/conceptadev/rockets/tree/main/packages/nestjs-authentication",children:"Authentication Module Documentation"}),":"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"ts","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"//..."})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"AuthRefreshModule"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".forRoot"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  userLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MyJwtUserLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"})"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"//... "})})]})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:["Additionally, you can take advantage of the ",(0,r.jsx)(s.code,{children:"MyUserLookupService"}),"\nfrom the ",(0,r.jsx)(s.code,{children:"@concepta/nestjs-user"})," module to streamline user lookup\noperations within your authentication flow, check\n",(0,r.jsx)(s.a,{href:"#user-module-documentation",children:"User Module Documentation"})," for reference:"]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["By default, ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," uses services defined in the\n",(0,r.jsx)(s.a,{href:"#nestjs-auth",children:"AuthenticationModule"})," to verify refresh tokens. However, you\ncan override this behavior by providing a custom service specifically for the\nrefresh token implementation during the module setup."]}),"\n",(0,r.jsx)(s.h4,{id:"14-first-token-refresh",children:"1.4 First Token Refresh"}),"\n",(0,r.jsx)(s.h5,{id:"validating-the-setup",children:"Validating the Setup"}),"\n",(0,r.jsx)(s.p,{children:"To validate the setup, let's test the refresh token functionality using CURL commands."}),"\n",(0,r.jsx)(s.h5,{id:"step-1-obtain-a-refresh-token",children:"Step 1: Obtain a Refresh Token"}),"\n",(0,r.jsxs)(s.p,{children:["First, obtain a refresh token by sending a request to the ",(0,r.jsx)(s.code,{children:"/auth/login"}),"\nendpoint with valid credentials:"]}),"\n",(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"curl"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-X"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"POST"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"http://localhost:3000/auth/login"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"\\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-H"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Content-Type: application/json'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-d"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'\'{"username":"user@example.com","password":"password"}\''})]})]})}),"\n",(0,r.jsx)(s.p,{children:"This should return a response with an access token and a refresh token."}),"\n",(0,r.jsx)(s.h5,{id:"step-2-refresh-the-jwt-token",children:"Step 2: Refresh the JWT Token"}),"\n",(0,r.jsx)(s.p,{children:"Next, use the obtained refresh token to refresh the JWT token:"}),"\n",(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"curl"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-X"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"POST"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"http://localhost:3000/auth/refresh"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-H"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Content-Type: application/json'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-d"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'\'{"refreshToken":"[refresh_token_value]"}\''})]})]})}),"\n",(0,r.jsx)(s.p,{children:"This should return a new access token and a new refresh token."}),"\n",(0,r.jsx)(s.h5,{id:"example-curl-calls",children:"Example CURL Calls"}),"\n",(0,r.jsx)(s.h6,{id:"obtain-a-refresh-token",children:"Obtain a Refresh Token"}),"\n",(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"curl"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-X"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"POST"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"http://localhost:3000/auth/login"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-H"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Content-Type: application/json'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-d"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'\'{"username":"user@example.com","password":"password"}\''})]})]})}),"\n",(0,r.jsx)(s.h6,{id:"example-refresh-token-response",children:"Example Refresh Token Response"}),"\n",(0,r.jsx)(s.pre,{"data-language":"json","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"json","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"accessToken"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"eyJhbGciOiJIUzI1NiIsInR5cC..."'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"refreshToken"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"eyJhbGciOiJIUzI1NiIsInR5cC..."'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h6,{id:"refresh-the-jwt-token",children:"Refresh the JWT Token"}),"\n",(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"curl"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-X"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"POST"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"http://localhost:3000/auth/refresh"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-H"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'Content-Type: application/json'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" \\"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-d"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'\'{"refreshToken":"eyJhbGciOiJIUzI1NiIsInR5cC..."}\''})]})]})}),"\n",(0,r.jsx)(s.h6,{id:"response-example",children:"Response (example)"}),"\n",(0,r.jsx)(s.pre,{"data-language":"json","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"json","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"accessToken"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"eyJhbGciOiJIUzI1NiIsInR5cC..."'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"refreshToken"'}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"eyJhbGciOiJIUzI1NiIsInR5cC..."'})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,r.jsx)(s.h2,{id:"how-to-guides",children:"How-To Guides"}),"\n",(0,r.jsx)(s.h3,{id:"1-registering-authrefreshmodule-synchronously",children:"1. Registering AuthRefreshModule Synchronously"}),"\n",(0,r.jsx)(s.pre,{"data-language":"ts","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"//..."})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"AuthRefreshModule"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".register"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  userLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MyUserLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  issueTokenService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"new"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MyIssueTokenService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"})"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"//..."})})]})}),"\n",(0,r.jsx)(s.h3,{id:"2-registering-authrefreshmodule-asynchronously",children:"2. Registering AuthRefreshModule Asynchronously"}),"\n",(0,r.jsx)(s.pre,{"data-language":"ts","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"//..."})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"AuthRefreshModule"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".registerAsync"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  inject"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" [MyUserLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" MyIssueTokenService]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"useFactory"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    userLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MyUserLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    issueTokenService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MyIssueTokenService"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    userLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    issueTokenService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  })"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"})"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"//..."})})]})}),"\n",(0,r.jsx)(s.h3,{id:"3-global-registering-authrefreshmodule-asynchronously",children:"3. Global Registering AuthRefreshModule Asynchronously"}),"\n",(0,r.jsx)(s.pre,{"data-language":"ts","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"//..."})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"AuthRefreshModule"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".forRootAsync"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  inject"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" [MyUserLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" MyIssueTokenService]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"useFactory"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ("})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    userLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MyUserLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    issueTokenService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MyIssueTokenService"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ) "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    userLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    issueTokenService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  })"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"})"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"//..."})})]})}),"\n",(0,r.jsx)(s.h3,{id:"4-using-custom-user-lookup-service",children:"4. Using Custom User Lookup Service"}),"\n",(0,r.jsx)(s.pre,{"data-language":"ts","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"//..."})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"@"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Injectable"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"MyUserLookupService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"extends"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"AuthRefreshUserLookupServiceInterface"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"constructor"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"private"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" userService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"UserService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") {}"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"bySubject"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(subject"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"ReferenceSubject"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Promise"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"<"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"ReferenceIdInterface"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"> {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// return authorized user"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"this"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"userService"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".findOne"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(subject);"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"//..."})})]})}),"\n",(0,r.jsx)(s.h3,{id:"5-implementing-and-using-custom-token-verification-service",children:"5. Implementing and Using Custom Token Verification Service"}),"\n",(0,r.jsxs)(s.p,{children:["By default, ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," uses services defined in the\n",(0,r.jsx)(s.a,{href:"#nestjs-auth",children:"AuthenticationModule"})," to verify refresh tokens. However, you\ncan override this behavior by providing a custom service specifically for\nthe refresh token implementation during the module setup."]}),"\n",(0,r.jsxs)(s.p,{children:["For more details on implementing a custom token verification service, refer to\nsection 5 of the How-To Guide in the\n",(0,r.jsx)(s.a,{href:"#nestjs-auth-jwt",children:"@concepta/nestjs-auth-jwt"})," documentation."]}),"\n",(0,r.jsx)(s.h3,{id:"6-overwriting-the-settings",children:"6. Overwriting the Settings"}),"\n",(0,r.jsx)(s.pre,{"data-language":"ts","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"ts","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-comment)"},children:"// app.module.ts"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { Module } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@nestjs/common'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { ExtractJwt } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@concepta/nestjs-jwt'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"import"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { AuthRefreshModule"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" AuthRefreshSettingsInterface } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"from"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'@concepta/nestjs-auth-refresh'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"settings"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"AuthRefreshSettingsInterface"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  jwtFromRequest"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"ExtractJwt"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".fromAuthHeaderAsBearerToken"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"()"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"verifyToken"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (token"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"string"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"done"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (error"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"any"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" payload"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"?:"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"any"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"void"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:") "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"try"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"const"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"payload"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"="}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" { id"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'user-id'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" };"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"done"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"null"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" payload);"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    } "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"catch"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" (error) {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"done"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"(error);"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    }"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"};"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"@"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"Module"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  imports"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ["})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"AuthRefreshModule"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".registerAsync"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"useFactory"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"async"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" () "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"=>"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" ({"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        settings"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      })"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    })"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  ]"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"})"})}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"export"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"class"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"AppModule"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {}"})]})]})}),"\n",(0,r.jsx)(s.h3,{id:"7-integration-with-other-nestjs-modules",children:"7. Integration with Other NestJS Modules"}),"\n",(0,r.jsxs)(s.p,{children:["Integrate ",(0,r.jsx)(s.code,{children:"@concepta/nestjs-auth-refresh"})," with other NestJS modules\nlike ",(0,r.jsx)(s.code,{children:"@concepta/nestjs-user"}),", ",(0,r.jsx)(s.code,{children:"@concepta/nestjs-auth-local"}),",\n",(0,r.jsx)(s.code,{children:"@concepta/nestjs-auth-jwt"}),", and more for a comprehensive\nauthentication system."]}),"\n",(0,r.jsx)(s.h2,{id:"engineering-concepts",children:"Engineering Concepts"}),"\n",(0,r.jsx)(s.h3,{id:"conceptual-overview-of-jwt-refresh-tokens",children:"Conceptual Overview of JWT Refresh Tokens"}),"\n",(0,r.jsx)(s.h4,{id:"what-is-a-refresh-token",children:"What is a Refresh Token?"}),"\n",(0,r.jsx)(s.p,{children:"A refresh token is a special token used to obtain a new access token\nwithout requiring the user to re-authenticate. It is typically issued\nalongside the access token and has a longer expiration time."}),"\n",(0,r.jsx)(s.h4,{id:"benefits-of-using-refresh-tokens",children:"Benefits of Using Refresh Tokens"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Improved Security"}),": By using refresh tokens, access tokens can\nhave shorter lifespans, reducing the risk of token theft."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Enhanced User Experience"}),": Users do not need to log in frequently,\nas refresh tokens can be used to obtain new access tokens seamlessly."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Scalability"}),": Refresh tokens allow for stateless authentication,\nwhich is ideal for scalable applications."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"design-choices-in-authrefreshmodule",children:"Design Choices in AuthRefreshModule"}),"\n",(0,r.jsx)(s.h4,{id:"why-use-nestjs-guards",children:"Why Use NestJS Guards?"}),"\n",(0,r.jsxs)(s.p,{children:["NestJS guards provide a way to control access to various parts of the\napplication by checking certain conditions before the route handler is\nexecuted. In ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"}),", guards are used to implement authentication\nand authorization logic. By using guards, developers can apply security\npolicies across routes efficiently, ensuring that only authenticated\nand authorized users can access protected resources."]}),"\n",(0,r.jsx)(s.h4,{id:"synchronous-vs-asynchronous-registration",children:"Synchronous vs Asynchronous Registration"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," supports both synchronous and asynchronous\nregistration:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Synchronous Registration"}),": This method is used when the configuration\noptions are static and available at application startup. It simplifies the\nsetup process and is suitable for most use cases where configuration values\ndo not depend on external services."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Asynchronous Registration"}),": This method is beneficial when configuration\noptions need to be retrieved from external sources, such as a database or an\nexternal API, at runtime. It allows for more flexible and dynamic\nconfiguration but requires an asynchronous factory function."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h4,{id:"global-vs-feature-specific-registration",children:"Global vs Feature-Specific Registration"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," can be registered globally or for specific features:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Global Registration"}),": Makes the module available throughout the entire\napplication. This approach is useful when JWT refresh functionality is\nrequired across all or most routes in the application."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Feature-Specific Registration"}),": Allows the module to be registered\nonly for specific features or modules within the application. This provides\nmore granular control, enabling different parts of the application to have\ndistinct authentication and authorization requirements."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"integrating-authrefreshmodule-with-other-modules",children:"Integrating AuthRefreshModule with Other Modules"}),"\n",(0,r.jsx)(s.h4,{id:"how-authrefreshmodule-works-with-authjwtmodule",children:"How AuthRefreshModule Works with AuthJwtModule"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," can be seamlessly integrated with the\n",(0,r.jsx)(s.code,{children:"AuthJwtModule"})," to provide a comprehensive authentication solution.\n",(0,r.jsx)(s.code,{children:"AuthJwtModule"})," handles the initial authentication using JWT tokens."]}),"\n",(0,r.jsxs)(s.p,{children:["Once the user is authenticated, ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," can issue a refresh\ntoken that the user can use to obtain new access tokens. This integration\nallows for secure and efficient authentication processes combining the\nstrengths of both modules."]}),"\n",(0,r.jsx)(s.h4,{id:"integrating-with-authlocalmodule",children:"Integrating with AuthLocalModule"}),"\n",(0,r.jsxs)(s.p,{children:["Integrating ",(0,r.jsx)(s.code,{children:"AuthRefreshModule"})," with ",(0,r.jsx)(s.code,{children:"AuthLocalModule"})," enables the\napplication to handle token refresh logic alongside local authentication.\nThis setup enhances the user experience by maintaining sessions securely and\nseamlessly. The integration involves configuring both modules to use the same\ntoken issuance and verification mechanisms, ensuring smooth interoperability\nand security."]})]})}s.default=(0,i.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,o.a)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)},pageOpts:{filePath:"pages/reference/rockets/nestjs-auth-refresh/README.mdx",route:"/reference/rockets/nestjs-auth-refresh/README",title:"Rockets NestJS Refresh Authentication",headings:t},pageNextRoute:"/reference/rockets/nestjs-auth-refresh/README"})}},function(e){e.O(0,[92673,92888,49774,40179],function(){return e(e.s=98301)}),_N_E=e.O()}]);